<!DOCTYPE html>
<html lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='http://localhost:1313/js/theme-mode.js'></script>
    <link rel="stylesheet" href='http://localhost:1313/css/frameworks.min.css' />
    <link rel="stylesheet" href='http://localhost:1313/css/github.min.css' />
    <link rel="stylesheet" href='http://localhost:1313/css/github-style.css' />
    <link rel="stylesheet" href='http://localhost:1313/css/light.css' />
    <link rel="stylesheet" href='http://localhost:1313/css/dark.css' />
    <link rel="stylesheet" href='http://localhost:1313/css/syntax.css' />
    <title>The Forgotten Aspect of DBRE - Blog</title>
    
    <link rel="icon" type="image/x-icon" href='/images/avatar.png'>
    
    <meta name="theme-color" content="#1e2327">

    <link rel="stylesheet" href="http://localhost:1313/css/custom.css">
    <script type="text/javascript" src="http://localhost:1313/js/custom.js"></script>

    
    <meta name="description"
  content=" The Forgotten Aspect of DBRE I am a great fan of the DBRE book, and an avid follower of the authors&rsquo; podcasts, videos and blog posts.
But there is one glaring omission that I can&rsquo;t find discussed properly anywhere: upgrades.
You need to patch to fix bugs or address vulnerabilities. You need to upgrade for support and new features that developers want.
I understand that site-specific needs make it hard to proclaim detailed edicts. But the DBRE book isn&rsquo;t about detailed edicts. It&rsquo;s about principles and a way of working.
" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="http://localhost:1313/post/the-forgotten-aspect-of-dbre/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="The Forgotten Aspect of DBRE - Blog" />
<meta name="twitter:description"
  content=" The Forgotten Aspect of DBRE I am a great fan of the DBRE book, and an avid follower of the authors&rsquo; podcasts, videos and blog posts.
But there is one glaring omission that I can&rsquo;t find discussed properly anywhere: upgrades.
You need to patch to fix bugs or address vulnerabilities. You need to upgrade for support and new features that developers want.
I understand that site-specific needs make it hard to proclaim detailed edicts. But the DBRE book isn&rsquo;t about detailed edicts. It&rsquo;s about principles and a way of working.
" />
<meta name="twitter:site" content="http://localhost:1313/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="http://localhost:1313/">


<meta property="og:type" content="article" />
<meta property="og:title" content="The Forgotten Aspect of DBRE - Blog">
<meta property="og:description"
  content=" The Forgotten Aspect of DBRE I am a great fan of the DBRE book, and an avid follower of the authors&rsquo; podcasts, videos and blog posts.
But there is one glaring omission that I can&rsquo;t find discussed properly anywhere: upgrades.
You need to patch to fix bugs or address vulnerabilities. You need to upgrade for support and new features that developers want.
I understand that site-specific needs make it hard to proclaim detailed edicts. But the DBRE book isn&rsquo;t about detailed edicts. It&rsquo;s about principles and a way of working.
" />
<meta property="og:url" content="http://localhost:1313/post/the-forgotten-aspect-of-dbre/" />
<meta property="og:site_name" content="The Forgotten Aspect of DBRE" />
<meta property="og:image"
  content="http://localhost:1313/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2025-04-26 09:51:11 &#43;0100 BST" />











</head>


<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="http://localhost:1313/">
        <img class="octicon" height="32" width="32" src="/images/fluidicon.png">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:http://localhost:1313/">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="http://localhost:1313/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="/images/fluidicon.png">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="http://localhost:1313/">
                  <img class=" avatar-user"
                    src="/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="http://localhost:1313/">SpokeyWheeler</a>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="http://localhost:1313/post/the-forgotten-aspect-of-dbre/">The Forgotten Aspect of DBRE</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Sat, 26 Apr 2025 09:51:11 &#43;0100"
                    class="no-wrap">
                    Sat, 26 Apr 2025 09:51:11 &#43;0100</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Sat, 26 Apr 2025 10:28:35 &#43;0100"
                    class="no-wrap">
                    Sat, 26 Apr 2025 10:28:35 &#43;0100</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      720 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/dbre">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      dbre
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/upgrades">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      upgrades
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/old-posts">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      old posts
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><hr>
<h1 id="the-forgotten-aspect-ofdbre">The Forgotten Aspect of DBRE</h1>
<p><img src="/images/TheHorror.jpg" alt="The horror&hellip; the horror&hellip;"></p>
<p>I am a great fan of the DBRE book, and an avid follower of the authors&rsquo; podcasts, videos and blog posts.</p>
<p>But there is one glaring omission that I can&rsquo;t find discussed properly anywhere: upgrades.</p>
<p>You need to patch to fix bugs or address vulnerabilities. You need to upgrade for support and new features that developers want.</p>
<p>I understand that site-specific needs make it hard to proclaim detailed edicts. But the DBRE book isn&rsquo;t about detailed edicts. It&rsquo;s about principles and a way of working.</p>
<h1 id="strategy">Strategy</h1>
<p>There should be a clear strategy around patching and upgrading. I want to call out some things to consider:</p>
<ul>
<li>all too few products have a clear version strategy. If they do, it should drive your approach</li>
<li>for products that have an unclear strategy, you will have to track their releases by hand</li>
<li>deploy security patches immediately (if appropriate)</li>
<li>deploy bug fixes at least quarterly (if appropriate)</li>
<li>if you have less than two years&rsquo; support left, start testing a newer version now</li>
<li>if you have less than one year&rsquo;s support left, start rolling out a new version now</li>
<li>start planning and engineering the rollout now. A developer need to upgrade can happen at any time</li>
<li>plan for an annual major upgrade. It&rsquo;s better to have everything in place and not use it than have to cobble something together every time</li>
</ul>
<p>A great example of a clear version strategy is <a href="https://www.postgresql.org/support/versioning/">PostgreSQL</a>. I am disappointed that more databases do not have such a clear and predictable process:</p>
<blockquote>
<p>Minor releases only fix bugs and vulnerabilities to reduce risk. For minor releases, the community considers not upgrading to be riskier than upgrading.</p></blockquote>
<p>It&rsquo;s worth adopting their versioning strategy in full if you are a database vendor. Hint, hint!</p>
<h1 id="testing">Testing</h1>
<p>This is the most painful part of upgrading. Nobody wants to replace something that works with an unknown quantity. The only way to reassure people is through rigorous testing.</p>
<h1 id="minor-releases-in-a-clear-versionstrategy">Minor Releases in a Clear Version Strategy</h1>
<p>Apply minor releases to all pre-production environments at once. If no issues surface within a given period, roll out the minor release to production.</p>
<h1 id="no-clear-version-strategy-or-major-versionupgrade">No Clear Version Strategy or Major Version Upgrade</h1>
<p>This approach applies to a minor release with no clear version strategy.</p>
<p>It also applies to a major upgrade irrespective of strategy.</p>
<p>If your developers use Docker on their workstation, start there. Replace the current version with the new version and run for a given period.</p>
<p>If no problems arise, roll out to build, integration, NFT and QA environments for a given period.</p>
<p>If no problems arise, roll out to production.</p>
<p>How long is &ldquo;a given period&rdquo;? That&rsquo;s up to you! It may be as little as one test run, if you have great test coverage. I suspect most teams would want at least a sprint in each environment. Your mileage may vary, etc.</p>
<h1 id="engineering">Engineering</h1>
<p>You should build database upgrades (and downgrades!) into your CI/CD pipelines from the outset. We all know that retrofitting things is more difficult.</p>
<p>Use the concept of a &ldquo;feature switch&rdquo; to determine which version to deploy.</p>
<p>Rolling back a version upgrade can be a challenge. It is especially difficult (impossible?) when using certain new features. If the upgrade breaks backward compatibility, your tests must be comprehensive.</p>
<h1 id="conclusion">Conclusion</h1>
<p>Upgrades are painful, but in the world of DRE, they shouldn&rsquo;t be. They&rsquo;re painful because they aren&rsquo;t regular and they&rsquo;re not automated. Your integration and NFT should include running different database versions.</p>
<p>Taking a PostgreSQL example, assume you are running 9.6. You could have a parallel integration for 10, 11 and 12. If you upgrade every year, you will have been testing 12 for 3 years before you adopt it. Even if you adopt it sooner, you will have tested it better than if you waited till adoption to start testing.</p>
<p>Other products have less clear strategies. But there is no reason you can&rsquo;t test every &ldquo;future&rdquo; version as a normal part of your integration. Disqualifying bad releases long before adoption saves a lot of pain.</p>
<p>I don&rsquo;t have all (or even most) of the answers. Comments and suggestions are welcome!</p>
<hr>
<h1 id="key-takeaway">Key takeaway:</h1>
<p>Upgrades are painful, but in the world of DRE, they shouldn&rsquo;t be. They&rsquo;re painful because they aren&rsquo;t regular and they&rsquo;re not automated. Your integration and NFT should include running different database versions.</p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='http://localhost:1313/js/toc.js'></script>
<link rel="stylesheet" href='http://localhost:1313/css/toc.css' />

  
<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='http://localhost:1313/css/gitalk.css'>
<script src='http://localhost:1313/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'Ov23lidpCMPBPI8PHMW3',
    clientSecret: 'dacda6b06beed9ee031254685b8761bd15c83aac',
    repo: 'SpokeyWheeler.github.io',
    owner: 'SpokeyWheeler',
    admin: ['SpokeyWheeler'],
    id: eval("location.href.match('/(?\u003c=post/)(.*)(?=/)/')[1]"), 
    distractionFreeMode: false 
  });
  (function() {
    gitalk.render('gitalk-container');
  })();
</script>

</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="http://localhost:1313/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
      <li class="mr-3 mr-lg-0">GitHub and the Invertocat logo are trademarks of <a href="https://github.com/">GitHub, Inc.</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>

</body>

<script type="application/javascript" src="http://localhost:1313/js/github-style.js"></script>







</html>